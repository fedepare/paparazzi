<!DOCTYPE module SYSTEM "module.dtd">

<module name="event_optic_flow">
  <doc>
    <description>Event based optic flow using DVS camera</description>
  </doc>

  <settings>
    <dl_settings>
      <dl_settings NAME="Event-based Optic Flow">
        <dl_setting var="enableDerotation" min="0" step="1" max="1" shortname="derotation" values="NO|YES" param="EOF_ENABLE_DEROTATION"/>
        <dl_setting var="inlierMaxDiff" min="0.05" step="0.05" max="2.0" shortname="flow_speed_threshold" param="EOF_INLIER_MAX_DIFF"/>
		<dl_setting var="derotationMovingAverageFactor" min="0.05" step="0.05" max="0.9" shortname="derotation_MA_factor" param="EOF_DEROTATION_MOVING_AVERAGE_FACTOR"/>
        <dl_setting var="minEventRate" min="100" step="100" max="5000" shortname="event_rate" param="EOF_MIN_EVENT_RATE"/>
        <dl_setting var="minPosVariance" min="10" step="50" max="1000" shortname="position_variance" param="EOF_MIN_POSITION_VARIANCE"/>
        <dl_setting var="minR2" min="0.1" step="0.05" max="1" shortname="min_R2" param="EOF_MIN_R2"/>
        <dl_setting var="irLedSwitch" min="0" step="1" max="1" shortname="led setting" values="OFF|ON" param="IR_LEDS_SWITCH"/>
	<dl_setting var="divergenceControlUseVision" min="0" step="1" max="1" shortname="control_use_vision" values="OFF|ON" param="EOF_DIVERGENCE_CONTROL_USE_VISION"/>
	<dl_setting var="divergenceControlGainP" min="0.01" step="0.01" max="1" shortname="control_P" param="EOF_DIVERGENCE_CONTROL_PGAIN"/>
	<dl_setting var="divergenceControlSetpoint" min="0.05" step="0.01" max="1" shortname="control_setpoint" param="EOF_DIVERGENCE_CONTROL_DIV_SETPOINT"/>
	<dl_setting var="divergenceControlHeightLimit" min="0.1" step="0.05" max="1" shortname="control_height_limit" param="EOF_DIVERGENCE_CONTROL_HEIGHT_LIMIT"/>
      </dl_settings>
    </dl_settings>
  </settings>
  <header>
    <file name="event_optic_flow.h"/>
  </header>
  <init fun="event_optic_flow_init()"/>
  <periodic fun="event_optic_flow_periodic()" start="event_optic_flow_start()" stop="event_optic_flow_stop()" freq="100" autorun="TRUE"/>
  <makefile>
    <file name="event_optic_flow.c"/>
    <file name="flow_field_estimation.c"/>
  </makefile>
</module>
